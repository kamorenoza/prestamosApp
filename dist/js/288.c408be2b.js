"use strict";(self["webpackChunkprestamos_app"]=self["webpackChunkprestamos_app"]||[]).push([[288],{3923:function(e,t,a){a.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-title",class:e.classTitle},[e.buttonBack?t("div",{staticClass:"m-title__button",on:{click:function(t){return e.goTo()}}},[t("f-icon",{attrs:{icon:"fa-arrow-left-long"}})],1):e._e(),t("p",{staticClass:"m-title__text"},[e._v(e._s(e.title))])])},l=[],o={props:{title:{type:String,default:""},buttonBack:{type:String,default:""}},computed:{classTitle(){return this.buttonBack?"m-title--back":""}},methods:{goTo(){this.$router.push(this.buttonBack)}}},s=o,r=a(1001),i=(0,r.Z)(s,n,l,!1,null,null,null),c=i.exports},889:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(3404);class l{getClientsFromLocal(){const e=localStorage.getItem("clients");return e?JSON.parse(e):[]}getClientsFromLocalBySearch(e){if(!e.trim())return this.getClientsFromLocal();let t=localStorage.getItem("clients"),a=[];return t&&(t=JSON.parse(t),a=t.filter((t=>{let a=n.P.normalizeText(t.name.toLowerCase()),l=n.P.normalizeText(t.document.toLowerCase());return a.indexOf(n.P.normalizeText(e.toLowerCase()))>=0||l.indexOf(n.P.normalizeText(e.toLowerCase()))>=0}))),a}getClientByDoc(e){let t,a=localStorage.getItem("clients");return a&&(a=JSON.parse(a),t=a.find((t=>t.document===e))),t}getClientById(e){let t,a=localStorage.getItem("clients");return a&&(a=JSON.parse(a),t=a.find((t=>t.id===e))),t}addClientToLocal(e,t,a,l,o,s,r){const i=n.P.getUId();let c=localStorage.getItem("clients");c=c?JSON.parse(c):[];const d={id:i,name:e,document:t,mobile:a,tel:l,address:o,nbh:s,comments:r};return c.push(d),localStorage.setItem("clients",JSON.stringify(c)),{clients:c,client:d}}updateClientToLocal(e,t,a,n,l,o,s,r){let i=JSON.parse(localStorage.getItem("clients"));const c={id:e,name:t,document:a,mobile:n,tel:l,address:o,nbh:s,comments:r},d=i.findIndex((t=>t.id===e));return-1!==d&&(i[d]=c),localStorage.setItem("clients",JSON.stringify(i)),{clients:i,client:c}}deleteToLocal(e){let t=JSON.parse(localStorage.getItem("clients"));const a=t.findIndex((t=>t.id===e));return-1!==a&&t.splice(a,1),localStorage.setItem("clients",JSON.stringify(t)),{clients:t}}}},7950:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(3781),l=a(9614),o=a(3404),s=a(6797),r=a.n(s),i=new WeakSet;class c{constructor(){(0,n.Z)(this,i)}getEarnings(e,t){const a=JSON.parse(localStorage.getItem("settings")),n=parseInt(a.maxi.replaceAll(".",""));let s=localStorage.getItem("loans"),c=localStorage.getItem("earnings");const g=[],m=o.P.getFirstDay(e),u=o.P.getLastDay(e),p=r()(e).year(),f=r()(e).month();return s&&(s=JSON.parse(s),s.forEach((e=>{if(r()(e.date).isBetween(m,u,void 0,"[]"))if(1===t&&parseInt(e.amount)>=n){const t=(0,l.Z)(this,i,d).call(this,e.clientId);g.push({id:o.P.getUId(),name:t.name,interes:e.interes,year:p,month:f,date:e.date})}else if(2===t&&parseInt(e.amount)<n){const t=(0,l.Z)(this,i,d).call(this,e.clientId);g.push({id:o.P.getUId(),name:t.name,interes:e.interes,year:p,month:f,date:e.date})}}))),c&&(c=JSON.parse(c),c.forEach((e=>{e.month===f&&e.year===p&&(1===t&&parseInt(e.amount)>=n||2===t&&parseInt(e.amount)<n)&&g.push(e)}))),g}addEarning(e,t,a,n,l,s){const r=o.P.getUId();t=t.replaceAll(".","");let i=localStorage.getItem("earnings");i=i?JSON.parse(i):[];const c={id:r,name:e,interes:t,year:a,month:n,date:l,amount:s};return i.push(c),localStorage.setItem("earnings",JSON.stringify(i)),i}}function d(e){let t,a=localStorage.getItem("clients");return a&&(a=JSON.parse(a),t=a.find((t=>t.id===e))),t}},9844:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(3404),l=a(6797),o=a.n(l),s=a(5784);class r{addFeeToLocal(e,t,a){t=t.replaceAll(".","");let l=localStorage.getItem("fees");l=l?JSON.parse(l):[];const o=n.P.getUId();return l.push({id:o,loanId:a,date:e,amount:t,paidAmount:0,paidDate:new Date,possibleDate:""}),localStorage.setItem("fees",JSON.stringify(l)),{fees:l}}updateFee(e,t,a){let n=JSON.parse(localStorage.getItem("fees"));t=t.replaceAll(".","");const l=n.findIndex((e=>e.id===a));if(-1!==l){let a=n[l];a.date=e,a.amount=t,n[l]=a}return localStorage.setItem("fees",JSON.stringify(n)),{fees:n}}addFeesToLocal(e,t,a){a=a.replaceAll(".","");let l=localStorage.getItem("fees");return l=l?JSON.parse(l):[],t.forEach((t=>{const o=n.P.getUId();l.push({id:o,loanId:e,date:t,amount:a,paidAmount:0,paidDate:"",possibleDate:""})})),localStorage.setItem("fees",JSON.stringify(l)),{fees:l}}getFeesByLoan(e){let t=localStorage.getItem("fees"),a=[];return t&&(t=JSON.parse(t),a=t.filter((t=>t.loanId===e))),a=a.sort(((e,t)=>{const a=t.date.split("-"),n=e.date.split("-"),l=`${a[1]}/${a[0]}/${a[2]}`,o=`${n[1]}/${n[0]}/${n[2]}`;return new Date(o)-new Date(l)})),a}getTotalFees(e){let t=localStorage.getItem("fees"),a=0,n=0;return t&&(t=JSON.parse(t),t.forEach((t=>{t.loanId===e&&(t.paidDate?(a+=parseInt(t.amount),n++):a+=parseInt(t.paidAmount))}))),{total:a,numPaid:n}}deleteByLoan(e){let t=localStorage.getItem("fees");t=t?JSON.parse(t):[];const a=t.filter((t=>t.loanId!==e));localStorage.setItem("fees",JSON.stringify(a))}deleteFee(e){let t=localStorage.getItem("fees");t=t?JSON.parse(t):[];const a=t.filter((t=>t.id!==e));localStorage.setItem("fees",JSON.stringify(a))}paidFee(e){let t=JSON.parse(localStorage.getItem("fees"));const a=t.findIndex((t=>t.id===e));if(-1!==a){let e=t[a];e.paidDate=e.paidDate?"":new Date,e.possibleDate="",e.paidAmount=0,t[a]=e}localStorage.setItem("fees",JSON.stringify(t))}possibleDateFee(e,t){let a=JSON.parse(localStorage.getItem("fees"));const n=a.findIndex((e=>e.id===t));if(-1!==n){let t=a[n];t.possibleDate=e,a[n]=t}return localStorage.setItem("fees",JSON.stringify(a)),{fees:a}}paidAmountFee(e,t){let a=JSON.parse(localStorage.getItem("fees"));e=e?e.replaceAll(".",""):0;const n=a.findIndex((e=>e.id===t));if(-1!==n){let t=a[n];t.paidAmount=e,a[n]=t}return localStorage.setItem("fees",JSON.stringify(a)),{fees:a}}getFeesByDate(e,t){let a=localStorage.getItem("fees"),n=[];const l=JSON.parse(localStorage.getItem("settings")),r=parseInt(l.maxi.replaceAll(".",""));e=o()(e);let i=o()().format("YYYY-MM-DD");return a&&(a=JSON.parse(a),n=a.filter((a=>{const n=o()(this.getDate(a.date)),l=this.getLoanById(a.loanId);return!(t===s.yn&&parseInt(l.amount)<r)&&(!(t===s.pq&&parseInt(l.amount)>=r)&&(e.isSame(o()(i))?n.isSameOrBefore(e)&&!a.paidDate:n.isSame(e)&&!a.paidDate))}))),n}getLoanById(e){let t=localStorage.getItem("loans"),a=[];return t&&(t=JSON.parse(t),a=t.filter((t=>t.id===e))),a[0]}getDate(e){const t=e.split("-");return`${t[1]}/${t[0]}/${t[2]}`}}},4527:function(e,t,a){a.d(t,{Z:function(){return J}});var n=a(3781),l=a(714),o=a(8829),s=a(9614),r=a(2575),i=a(3404),c=a(889),d=a(5784),g=a(9844),m=a(7950),u=a(6797),p=a.n(u),f=new WeakMap,S=new WeakMap,I=new WeakMap,h=new WeakSet,N=new WeakSet,O=new WeakSet;class J{constructor(){(0,n.Z)(this,O),(0,n.Z)(this,N),(0,n.Z)(this,h),(0,l.Z)(this,f,{writable:!0,value:void 0}),(0,l.Z)(this,S,{writable:!0,value:void 0}),(0,l.Z)(this,I,{writable:!0,value:void 0}),(0,r.Z)(this,f,new c.Z),(0,r.Z)(this,S,new g.Z),(0,r.Z)(this,I,new m.Z)}getLoansFromLocal(e,t){let a=localStorage.getItem("loans");const n=JSON.parse(localStorage.getItem("settings")),l=parseInt(n.maxi.replaceAll(".",""));let o=[];a=t&&t.trim()?this.getLoansFromLocalBySearch(t):JSON.parse(a),a&&(o=a.filter((e=>!e.closed)));let{maxi:r,mini:i,others:c}=(0,s.Z)(this,h,y).call(this,o,l);o=(0,s.Z)(this,N,L).call(this,o,e,l);let d=(0,s.Z)(this,O,Z).call(this,o);return{loansFilter:o,maxi:r,mini:i,others:c,total:d}}getLoansByClient(e){let t=localStorage.getItem("loans"),a=[];return t&&(t=JSON.parse(t),a=t.filter((t=>t.clientId===e))),a}getLoanById(e){let t=localStorage.getItem("loans"),a=[];return t&&(t=JSON.parse(t),a=t.filter((t=>t.id===e))),a[0]}getLoansFromLocalBySearch(e){let t=localStorage.getItem("clients"),a=[];if(t){t=JSON.parse(t);const n=t.filter((t=>{let a=i.P.normalizeText(t.name.toLowerCase());return a.indexOf(i.P.normalizeText(e.toLowerCase()))>=0}));n.forEach((e=>{a=a.concat(this.getLoansByClient(e.id))}))}return a}addLoanToLocal(e,t,a,n,l,o){const s=i.P.getUId();a=a.replaceAll(".",""),n=n.replaceAll(".","");const r=parseInt(a)+parseInt(n);let c=localStorage.getItem("loans");c=c?JSON.parse(c):[];const d={id:s,clientId:e,date:t,amount:a,interes:n,typeTime:l,feesNum:o,done:!1,balance:r,closed:!1};return c.push(d),localStorage.setItem("loans",JSON.stringify(c)),{loans:c,loan:d}}updateLoanToLocal(e,t,a,n,l,o,s,r){n=n.replaceAll(".",""),l=l.replaceAll(".","");const i=parseInt(n)+parseInt(l);let c=JSON.parse(localStorage.getItem("loans"));const d={id:e,clientId:t,date:a,amount:n,interes:l,typeTime:o,feesNum:s,done:r,balance:i,closed:!1},g=c.findIndex((t=>t.id===e));return-1!==g&&(c[g]=d),localStorage.setItem("loans",JSON.stringify(c)),{loans:c,loan:d}}deleteToLocal(e){let t=JSON.parse(localStorage.getItem("loans")),a=JSON.parse(localStorage.getItem("fees"));const n=t.findIndex((t=>t.id===e));-1!==n&&t.splice(n,1);const l=a.filter((t=>t.loanId!==e));return localStorage.setItem("loans",JSON.stringify(t)),localStorage.setItem("fees",JSON.stringify(l)),{loans:t}}deleteByClient(e){let t=JSON.parse(localStorage.getItem("loans")),a=JSON.parse(localStorage.getItem("fees")),n=[];const l=t.filter((t=>t.clientId===e));l.forEach((e=>{n=a.filter((t=>t.loanId!==e.id))}));const o=t.filter((t=>t.clientId!==e));return localStorage.setItem("loans",JSON.stringify(o)),localStorage.setItem("fees",JSON.stringify(n)),{loans:t}}closeLoan(e){let t=JSON.parse(localStorage.getItem("loans")),a=null;const n=t.findIndex((t=>t.id===e));-1!==n&&(a=t[n]);const l=(0,o.Z)(this,f).getClientById(a.clientId),s=p()(a.date).year(),r=p()(a.date).month();return(0,o.Z)(this,I).addEarning(l.name,a.interes,s,r,a.date,a.amount),this.deleteToLocal(e),{loans:t}}}function y(e,t){let a=0,n=0,l=0;return e.forEach((e=>{const o=parseInt(e.amount);e.feesNum&&e.typeTime?(o<t&&(n+=1),o>=t&&(a+=1)):l+=1})),{maxi:a,mini:n,others:l}}function L(e,t,a){return e.filter((e=>t===d.Tn?!e.feesNum||!e.typeTime:e.feesNum&&e.typeTime?t===d.pq?parseInt(e.amount)<a:parseInt(e.amount)>=a:void 0))}function Z(e){let t=0;return e.forEach((e=>{const a=(0,o.Z)(this,S).getTotalFees(e.id);t+=parseInt(e.balance)-a.total})),t}},9614:function(e,t,a){a.d(t,{Z:function(){return n}});a(1703);function n(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}},3781:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(4063);function l(e,t){(0,n.Z)(e,t),t.add(e)}}}]);
//# sourceMappingURL=288.c408be2b.js.map