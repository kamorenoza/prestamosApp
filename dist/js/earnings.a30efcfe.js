"use strict";(self["webpackChunkprestamos_app"]=self["webpackChunkprestamos_app"]||[]).push([[711],{7708:function(t,e,n){n.r(e),n.d(e,{default:function(){return j}});var r=function(){var t=this,e=t._self._c;return e("div",[e("title-general",{attrs:{title:"Ganancias"}}),e("pick-month-year"),e("content-general",[e("earnings-filter"),e("earnings-total",{attrs:{total:t.total}}),e("div",t._l(t.earnings,(function(t){return e("earning-row",{key:t.id,attrs:{earning:t}})})),1)],1)],1)},i=[],s=n(3923),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-select-period"},[e("b-icon",{attrs:{icon:"chevron-double-left"},on:{click:function(e){return t.changePeriod()}}}),e("div",{staticClass:"m-select-period__calendar"},[e("b-form-datepicker",{attrs:{id:"datepicker-2",locale:"es","button-only":"","today-button":"","label-today-button":"Seleccionar hoy"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),e("p",[t._v(t._s(t._f("formatDateMonthYear")(t.currentPeriod))+" ")])],1),e("b-icon",{attrs:{icon:"chevron-double-right"},on:{click:function(e){return t.changePeriod(!0)}}})],1)},l=[],o=n(3404),c=n(3822),u={name:"PickMonthYear",data(){return{date:this.currentPeriod}},watch:{date(t){t!==this.currentPeriod&&this.setCurrentPeriod(t)},currentPeriod(t){t!==this.date&&(this.date=t)}},computed:{...(0,c.rn)("earningsStore",["currentPeriod"])},methods:{changePeriod(t){t?this.setCurrentPeriod(o.P.sumMonths(this.currentPeriod,1)):this.setCurrentPeriod(o.P.subtractMonths(this.currentPeriod,1))},...(0,c.OI)("earningsStore",["setCurrentPeriod"])}},d=u,f=n(1001),h=(0,f.Z)(d,a,l,!1,null,null,null),m=h.exports,g=n(1782),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-filters m-filters--two"},[e("div",{staticClass:"m-filters__item",class:t.classSelected(t.maxi),on:{click:function(e){return t.setFilterSelected(t.maxi)}}},[e("div",{staticClass:"m-filters__icon"},[e("f-icon",{attrs:{icon:"fa-up-long"}})],1),t._m(0)]),e("div",{staticClass:"m-filters__item",class:t.classSelected(t.mini),on:{click:function(e){return t.setFilterSelected(t.mini)}}},[e("div",{staticClass:"m-filters__icon"},[e("f-icon",{attrs:{icon:"fa-down-long"}})],1),t._m(1)])])},_=[function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"m-filters__title"},[t._v("Maxi")])])},function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"m-filters__title"},[t._v("Mini")])])}],v=n(5784),S={name:"EarningsFilter",computed:{maxi(){return v.yn},mini(){return v.pq},...(0,c.rn)("earningsStore",["filterSelected"])},methods:{classSelected(t){return this.filterSelected===t?"m-filters--selected":""},...(0,c.OI)("earningsStore",["setFilterSelected"])}},b=S,C=(0,f.Z)(b,p,_,!1,null,null,null),P=C.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-loan-total m-loan-total--earnings"},[e("p",{staticClass:"m-loan-total__subtitle"},[t._v(t._s(t.title))]),e("p",{staticClass:"m-loan-total__text"},[t._v("$ "+t._s(t._f("formatNumber")(t.total)))])])},x=[],y=n(6797),Z=n.n(y),w={name:"EarningsTotal",props:{total:{type:[String,Number],default:0}},computed:{title(){const t=(0,v.qG)(Z()(this.currentPeriod).month()+1),e=this.filterSelected===v.yn?"Maxi":"Mini";return`Total Ganancias ${e} ${t}`},...(0,c.rn)("earningsStore",["currentPeriod","filterSelected"])}},E=w,I=(0,f.Z)(E,k,x,!1,null,null,null),T=I.exports,B=n(714),M=n(8829),F=n(2575),N=n(7950),O=new WeakMap;class A{constructor(){(0,B.Z)(this,O,{writable:!0,value:void 0}),(0,F.Z)(this,O,new N.Z)}getAllEarnings(t,e){return(0,M.Z)(this,O).getEarnings(t,e)}getTotalEarnings(t,e){const n=(0,M.Z)(this,O).getEarnings(t,e);let r=0;return n.forEach((t=>{r+=parseInt(t.interes)})),r}}var J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("p",{staticClass:"text-book"},[t._v(t._s(t.earning.name))]),e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"icon-earnings"}),e("div",[e("p",{staticClass:"text-li mb-1"},[t._v(t._s(t._f("formatDate")(t.earning.date)))]),e("p",{staticClass:"text-li text-book"},[t._v("$ "+t._s(t._f("formatNumber")(t.earning.interes)))]),e("p")])])])},G=[],$={name:"EarningRow",props:{earning:{type:Object}}},D=$,W=(0,f.Z)(D,J,G,!1,null,null,null),U=W.exports,Y={name:"EarningsView",components:{EarningRow:U,EarningsTotal:T,EarningsFilter:P,ContentGeneral:g.Z,PickMonthYear:m,TitleGeneral:s.Z},data(){return{uc:new A,earnings:[],total:0}},watch:{currentPeriod(){this.init()},filterSelected(){this.init()}},computed:{...(0,c.rn)("earningsStore",["currentPeriod","filterSelected"])},methods:{init(){this.earnings=this.uc.getAllEarnings(this.currentPeriod,this.filterSelected),this.total=this.uc.getTotalEarnings(this.currentPeriod,this.filterSelected)}},created(){this.init()}},q=Y,R=(0,f.Z)(q,r,i,!1,null,null,null),j=R.exports},1782:function(t,e,n){n.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"l-general",class:t.classWButton},[e("div",{staticClass:"l-content"},[t._t("default"),t.buttonText?e("div",{staticClass:"l-button"},[e("button",{staticClass:"button-general",on:{click:function(e){return t.buttonAction()}}},[t._v(" "+t._s(t.buttonText)+" ")])]):t._e()],2)])},i=[],s={props:{buttonText:{type:String,default:""},buttonAction:{type:Function,default:()=>{}},isSearch:{type:Boolean,default:!1},hasFilters:{type:Boolean,default:!1}},computed:{showButton(){return this.buttonText},classWButton(){let t="";return this.showButton&&(t+="l-general--button "),this.isSearch&&(t+="l-general--search "),this.hasFilters&&(t+="l-general--filters "),t}}},a=s,l=n(1001),o=(0,l.Z)(a,r,i,!1,null,null,null),c=o.exports},3923:function(t,e,n){n.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-title",class:t.classTitle},[t.buttonBack?e("div",{staticClass:"m-title__button",on:{click:function(e){return t.goTo()}}},[e("f-icon",{attrs:{icon:"fa-arrow-left-long"}})],1):t._e(),e("p",{staticClass:"m-title__text"},[t._v(t._s(t.title))])])},i=[],s={props:{title:{type:String,default:""},buttonBack:{type:String,default:""}},computed:{classTitle(){return this.buttonBack?"m-title--back":""}},methods:{goTo(){this.$router.push(this.buttonBack)}}},a=s,l=n(1001),o=(0,l.Z)(a,r,i,!1,null,null,null),c=o.exports},7950:function(t,e,n){n.d(e,{Z:function(){return c}});var r=n(3781),i=n(9614),s=n(3404),a=n(6797),l=n.n(a),o=new WeakSet;class c{constructor(){(0,r.Z)(this,o)}getEarnings(t,e){const n=JSON.parse(localStorage.getItem("settings")),r=parseInt(n.maxi.replaceAll(".",""));let a=localStorage.getItem("loans"),c=localStorage.getItem("earnings");const d=[],f=s.P.getFirstDay(t),h=s.P.getLastDay(t),m=l()(t).year(),g=l()(t).month();return a&&(a=JSON.parse(a),a.forEach((t=>{if(l()(t.date).isBetween(f,h,void 0,"[]"))if(1===e&&parseInt(t.amount)>=r){const e=(0,i.Z)(this,o,u).call(this,t.clientId);d.push({id:s.P.getUId(),name:e.name,interes:t.interes,year:m,month:g,date:t.date})}else if(2===e&&parseInt(t.amount)<r){const e=(0,i.Z)(this,o,u).call(this,t.clientId);d.push({id:s.P.getUId(),name:e.name,interes:t.interes,year:m,month:g,date:t.date})}}))),c&&(c=JSON.parse(c),c.forEach((t=>{t.month===g&&t.year===m&&(1===e&&parseInt(t.amount)>=r||2===e&&parseInt(t.amount)<r)&&d.push(t)}))),d}addEarning(t,e,n,r,i,a){const l=s.P.getUId();e=e.replaceAll(".","");let o=localStorage.getItem("earnings");o=o?JSON.parse(o):[];const c={id:l,name:t,interes:e,year:n,month:r,date:i,amount:a};return o.push(c),localStorage.setItem("earnings",JSON.stringify(o)),o}}function u(t){let e,n=localStorage.getItem("clients");return n&&(n=JSON.parse(n),e=n.find((e=>e.id===t))),e}},9614:function(t,e,n){n.d(e,{Z:function(){return r}});n(1703);function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}},3781:function(t,e,n){n.d(e,{Z:function(){return i}});var r=n(4063);function i(t,e){(0,r.Z)(t,e),e.add(t)}}}]);
//# sourceMappingURL=earnings.a30efcfe.js.map