"use strict";(self["webpackChunkprestamos_app"]=self["webpackChunkprestamos_app"]||[]).push([[985],{7675:function(e,t,s){s.r(t),s.d(t,{default:function(){return te}});var n=function(){var e=this,t=e._self._c;return t("div",[t("title-general",{attrs:{title:"Gastos diarios"}}),t("pick-date-expenses"),t("total-expenses",{attrs:{total:e.total}}),t("content-general",[t("div",{staticClass:"pt-5 mt-4"},e._l(e.expenses,(function(s){return t("expense-row",{key:s.id,attrs:{expense:s,action:e.init}})})),1),t("total-day",{attrs:{total:e.totalDay}})],1),t("add-expense-modal",{attrs:{action:e.init}})],1)},a=[],i=s(3923),o=s(1782),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-select-period"},[t("b-icon",{attrs:{icon:"chevron-double-left"},on:{click:function(t){return e.changePeriod()}}}),t("div",{staticClass:"m-select-period__calendar"},[t("b-form-datepicker",{attrs:{id:"datepicker-2",locale:"es","button-only":"","today-button":"","label-today-button":"Seleccionar hoy"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),t("p",[e._v(e._s(e._f("formatDate")(e.currentPeriod))+" ")])],1),t("b-icon",{attrs:{icon:"chevron-double-right"},on:{click:function(t){return e.changePeriod(!0)}}})],1)},l=[],c=s(3404),d=s(3822),u={name:"PickDateExpenses",data(){return{date:this.currentPeriod}},watch:{date(e){e!==this.currentPeriod&&this.setCurrentPeriod(e)},currentPeriod(e){e!==this.date&&(this.date=e)}},computed:{...(0,d.rn)("dailyExpensesStore",["currentPeriod"])},methods:{changePeriod(e){e?this.setCurrentPeriod(c.P.sumDays(this.currentPeriod,1)):this.setCurrentPeriod(c.P.subtractDays(this.currentPeriod,1))},...(0,d.OI)("dailyExpensesStore",["setCurrentPeriod"])}},p=u,h=s(1001),x=(0,h.Z)(p,r,l,!1,null,null,null),m=x.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-total-expenses"},[t("div",{staticClass:"text-center"},[t("p",{staticClass:"m-total-expenses__subtitle"},[e._v("Gastos totales de "+e._s(e.month))]),t("p",{staticClass:"m-total-expenses__amount"},[e._v("$ "+e._s(e._f("formatNumber")(e.total)))])])])},_=[],v=s(6797),b=s.n(v),y=s(5784),g={name:"TotalExpenses",props:{total:{type:[Number,String],default:0}},computed:{month(){const e=b()(this.currentPeriod);return(0,y.Vu)(e.month()+1)},...(0,d.rn)("dailyExpensesStore",["currentPeriod"])}},E=g,S=(0,h.Z)(E,f,_,!1,null,null,null),C=S.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-expense"},[t("div",{staticClass:"m-expense__icon"},[t("f-icon",{attrs:{icon:"fa-coins"}})],1),t("div",{staticClass:"m-expense__body"},[t("p",[e._v(e._s(e.expense.description))]),t("p",{staticClass:"text-book"},[e._v("$ "+e._s(e._f("formatNumber")(e.expense.amount)))])]),t("div",{staticClass:"m-expense__actions"},[t("div",{staticClass:"m-expense__action m-expense__delete",on:{click:function(t){return e.deleteExp()}}},[t("f-icon",{attrs:{icon:"fa-trash-can"}})],1),t("div",{staticClass:"m-expense__action m-expense__edit",on:{click:function(t){return e.edit()}}},[t("f-icon",{attrs:{icon:"fa-pen"}})],1)])])},k=[],w=s(2399),D=s(714),Z=s(8829),I=s(2575);class M{getExpensesByDay(e){e=b()(e);let t=localStorage.getItem("expenses");return t=t?JSON.parse(t):[],t.filter((t=>b()(t.date).isSame(e,"day")))}getExpensesByMonth(e){e=b()(e);const t=c.P.getFirstDay(e),s=c.P.getLastDay(e);let n=localStorage.getItem("expenses");return n=n?JSON.parse(n):[],n.filter((e=>b()(e.date).isBetween(t,s,void 0,"[]")))}addExpense(e,t,s){const n=c.P.getUId();s=s.replaceAll(".","");let a=localStorage.getItem("expenses");a=a?JSON.parse(a):[];const i={id:n,date:e,description:t,amount:s};return a.push(i),localStorage.setItem("expenses",JSON.stringify(a)),{expenses:a,expense:i}}updateExpense(e,t,s,n){let a=localStorage.getItem("expenses");a=a?JSON.parse(a):[],s=s.replaceAll(".","");const i={id:n,date:e,description:t,amount:s},o=a.findIndex((e=>e.id===n));return-1!==o&&(a[o]=i),localStorage.setItem("expenses",JSON.stringify(a)),{expenses:a,expense:i}}deleteExpense(e){let t=JSON.parse(localStorage.getItem("expenses"));const s=t.findIndex((t=>t.id===e));return-1!==s&&t.splice(s,1),localStorage.setItem("expenses",JSON.stringify(t)),{expenses:t}}}var B=new WeakMap;class T{constructor(){(0,D.Z)(this,B,{writable:!0,value:void 0}),(0,I.Z)(this,B,new M)}saveExpense(e,t,s,n){return n?(0,Z.Z)(this,B).updateExpense(e,t,s,n):(0,Z.Z)(this,B).addExpense(e,t,s)}getExpensesByDay(e){return(0,Z.Z)(this,B).getExpensesByDay(e)}getTotalMonth(e){const t=(0,Z.Z)(this,B).getExpensesByMonth(e);let s=0;return t.forEach((e=>s+=parseInt(e.amount))),s}deleteExpense(e){return(0,Z.Z)(this,B).deleteExpense(e)}}var N={name:"ExpenseRow",props:{expense:{type:Object},action:{type:Function}},data(){return{uc:new T}},methods:{edit(){this.setExpenseSelected(this.expense),this.$bvModal.show("addExpenseModal")},async deleteExp(){const e=await w.t.confirm("Se eliminará el gasto, ¿Está seguro?");e.isConfirmed&&(this.uc.deleteExpense(this.expense.id),await w.t.notify("Gasto eliminado"),this.action())},...(0,d.OI)("dailyExpensesStore",["setExpenseSelected"])}},O=N,A=(0,h.Z)(O,P,k,!1,null,null,null),G=A.exports,J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-expense-footer"},[t("div",[t("p",{staticClass:"m-expense-footer__sub"},[e._v("Total gastos del día: ")]),t("p",{staticClass:"m-expense-footer__total"},[e._v("$ "+e._s(e._f("formatNumber")(e.total)))])]),t("div",[t("button",{staticClass:"button-rounded",on:{click:function(t){return e.openModal()}}},[t("f-icon",{attrs:{icon:"fa-plus"}})],1)])])},$=[],F={name:"TotalDay",props:{total:{type:[Number,String],default:0}},methods:{openModal(){this.$bvModal.show("addExpenseModal")}}},V=F,R=(0,h.Z)(V,J,$,!1,null,null,null),W=R.exports,L=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"addExpenseModal","hide-footer":"",centered:"","hide-header":"","content-class":"border-0","body-class":"p-0"},on:{show:function(t){return e.fill()},hidden:function(t){return e.clear()}}},[t("div",{staticClass:"o-modal"},[t("div",{staticClass:"o-modal__header"},[t("p",[e._v("Gasto diario")])]),t("div",{staticClass:"o-modal__body"},[t("input-date",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),t("input-general",{attrs:{icon:"fa-comment",label:"Descripción"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),t("input-general",{attrs:{"is-number":"",icon:"fa-hand-holding-dollar",label:"Valor"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),t("div",{staticClass:"o-modal__footer"},[t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.hideModal()}}},[e._v("CANCELAR")]),t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.addExpense()}}},[e._v("ACEPTAR")])])])])},j=[],U=s(8866),q=s(3972),z={name:"AddExpenseModal",components:{InputGeneral:q.Z,InputDate:U.Z},props:{action:{type:Function}},data(){return{date:new Date(b()(this.currentPeriod)),description:"",amount:"",id:"",uc:new T}},computed:{isValid(){return this.date&&this.description.trim()&&this.amount},...(0,d.rn)("dailyExpensesStore",["currentPeriod","expenseSelected"])},methods:{hideModal(){this.$bvModal.hide("addExpenseModal")},async addExpense(){if(!this.isValid)return!1;this.uc.saveExpense(this.date,this.description,this.amount,this.id),this.action(),await w.t.notify("Guardado correctamente"),this.hideModal()},fill(){this.date=new Date(b()(this.currentPeriod)),this.expenseSelected&&(this.date=new Date(b()(this.expenseSelected.date)),this.amount=this.expenseSelected.amount,this.description=this.expenseSelected.description,this.id=this.expenseSelected.id)},clear(){this.setExpenseSelected(null),this.date=new Date(b()(this.currentPeriod)),this.amount="",this.description="",this.id=""},...(0,d.OI)("dailyExpensesStore",["setExpenseSelected"])}},H=z,K=(0,h.Z)(H,L,j,!1,null,null,null),Q=K.exports,X={name:"DailyExpensesView",components:{AddExpenseModal:Q,TotalDay:W,ExpenseRow:G,TotalExpenses:C,PickDateExpenses:m,ContentGeneral:o.Z,TitleGeneral:i.Z},data(){return{uc:new T,total:0}},watch:{currentPeriod(){this.init()}},computed:{totalDay(){let e=0;return this.expenses.forEach((t=>e+=parseInt(t.amount))),e},...(0,d.rn)("dailyExpensesStore",["currentPeriod","expenses"])},methods:{init(){this.setExpenses(this.uc.getExpensesByDay(this.currentPeriod)),this.total=this.uc.getTotalMonth(this.currentPeriod)},...(0,d.OI)("dailyExpensesStore",["setExpenses"])},created(){this.init()}},Y=X,ee=(0,h.Z)(Y,n,a,!1,null,null,null),te=ee.exports},1782:function(e,t,s){s.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"l-general",class:e.classWButton},[t("div",{staticClass:"l-content"},[e._t("default"),e.buttonText?t("div",{staticClass:"l-button"},[t("button",{staticClass:"button-general",on:{click:function(t){return e.buttonAction()}}},[e._v(" "+e._s(e.buttonText)+" ")])]):e._e()],2)])},a=[],i={props:{buttonText:{type:String,default:""},buttonAction:{type:Function,default:()=>{}},isSearch:{type:Boolean,default:!1},hasFilters:{type:Boolean,default:!1}},computed:{showButton(){return this.buttonText},classWButton(){let e="";return this.showButton&&(e+="l-general--button "),this.isSearch&&(e+="l-general--search "),this.hasFilters&&(e+="l-general--filters "),e}}},o=i,r=s(1001),l=(0,r.Z)(o,n,a,!1,null,null,null),c=l.exports},3923:function(e,t,s){s.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-title",class:e.classTitle},[e.buttonBack?t("div",{staticClass:"m-title__button",on:{click:function(t){return e.goTo()}}},[t("f-icon",{attrs:{icon:"fa-arrow-left-long"}})],1):e._e(),t("p",{staticClass:"m-title__text"},[e._v(e._s(e.title))])])},a=[],i={props:{title:{type:String,default:""},buttonBack:{type:String,default:""}},computed:{classTitle(){return this.buttonBack?"m-title--back":""}},methods:{goTo(){this.$router.push(this.buttonBack)}}},o=i,r=s(1001),l=(0,r.Z)(o,n,a,!1,null,null,null),c=l.exports}}]);
//# sourceMappingURL=dailyExpenses.39515e82.js.map