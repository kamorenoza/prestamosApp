"use strict";(self["webpackChunkprestamos_app"]=self["webpackChunkprestamos_app"]||[]).push([[635],{1715:function(t,e,s){s.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"o-card",on:{click:function(e){return t.goToLoan()}}},[e("div",{staticClass:"o-card-header"},[e("div",{staticClass:"d-flex align-items-center o-card__name"},[e("f-icon",{staticClass:"o-card__icon",attrs:{icon:"fa-circle-dollar-to-slot"}}),e("p",{staticClass:"o-card__title pl-2"},[t._v(t._s(t.name))])],1),e("p",{staticClass:"o-card__text-gray"},[t._v(t._s(t._f("formatDate")(t.loan.date)))])]),e("div",{staticClass:"d-flex justify-content-end o-card__total"},[e("p",[t._v("$ "+t._s(t._f("formatNumber")(t.loan.balance)))])]),e("div",{staticClass:"o-card-body"},[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("p",[t._v("Pagado:")]),e("p",{staticClass:"text-book"},[t._v("$ "+t._s(t._f("formatNumber")(t.total)))])]),e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("p",[t._v("Saldo:")]),e("p",{staticClass:"text-danger text-book"},[t._v("$ "+t._s(t._f("formatNumber")(t.balance(t.loan.balance))))])]),e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("p",{staticClass:"o-card__text-gray"},[t._v("Abonos: "+t._s(t.numPaid)+" de "+t._s(t.totalFees))])])])])},n=[],l=s(6973),i=s(3822),o={props:{loan:{type:Object},name:{type:String},backRoute:{type:String}},data(){return{uc:new l.Z,fees:[],total:0,numPaid:0}},computed:{totalFees(){return this.fees.length}},methods:{getFees(){this.fees=this.uc.getFeesByLoan(this.loan.id);const t=this.uc.getTotalFees(this.loan.id);this.total=t.total,this.numPaid=t.numPaid},goToLoan(){this.setBackRoute(this.backRoute),this.setLoanSelected(this.loan),this.$router.push("/detail-loan")},balance(t){return t-this.total},...(0,i.OI)("loansStore",["setBackRoute","setLoanSelected"])},created(){this.getFees()}},r=o,c=s(1001),u=(0,c.Z)(r,a,n,!1,null,null,null),d=u.exports},7601:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var a=function(){var t=this,e=t._self._c;return e("div",[e("title-general",{attrs:{title:"Préstamos"}}),e("content-general",{attrs:{buttonText:"Nuevo préstamo",buttonAction:t.goToSave,"has-filters":""}},[e("loans-filters"),e("search-input",{attrs:{label:"Buscar"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("loans-total",{attrs:{total:t.loans.total}}),e("div",{staticClass:"l-loans"},t._l(t.loans.loansFilter,(function(s){return e("loan-row",{key:s.id,attrs:{loan:s,name:t.getName(s.clientId),"back-route":"/loans"}})})),1)],1)],1)},n=[],l=s(3923),i=s(1782),o=s(6466),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-filters"},[e("div",{staticClass:"m-filters__item",class:t.classSelected(t.maxi),on:{click:function(e){return t.setFilterSelected(t.maxi)}}},[e("div",{staticClass:"m-filters__icon"},[e("f-icon",{attrs:{icon:"fa-up-long"}})],1),e("div",[e("p",{staticClass:"m-filters__title"},[t._v("Maxi")]),e("p",{staticClass:"m-filters__text"},[t._v(t._s(t.loans.maxi)+" préstamos")])])]),e("div",{staticClass:"m-filters__item",class:t.classSelected(t.mini),on:{click:function(e){return t.setFilterSelected(t.mini)}}},[e("div",{staticClass:"m-filters__icon"},[e("f-icon",{attrs:{icon:"fa-down-long"}})],1),e("div",[e("p",{staticClass:"m-filters__title"},[t._v("Mini")]),e("p",{staticClass:"m-filters__text"},[t._v(t._s(t.loans.mini)+" préstamos")])])]),e("div",{staticClass:"m-filters__item",class:t.classSelected(t.others),on:{click:function(e){return t.setFilterSelected(t.others)}}},[e("div",{staticClass:"m-filters__icon"},[e("f-icon",{attrs:{icon:"fa-ellipsis-vertical"}})],1),e("div",[e("p",{staticClass:"m-filters__title"},[t._v("Otros")]),e("p",{staticClass:"m-filters__text"},[t._v(t._s(t.loans.others)+" préstamos")])])])])},c=[],u=s(5784),d=s(3822),h={name:"LoansFilters",computed:{maxi(){return u.yn},mini(){return u.pq},others(){return u.Tn},...(0,d.rn)("loansStore",["filterSelected","loans"])},methods:{classSelected(t){return this.filterSelected===t?"m-filters--selected":""},...(0,d.OI)("loansStore",["setFilterSelected"])}},f=h,_=s(1001),m=(0,_.Z)(f,r,c,!1,null,null,null),p=m.exports,v=s(7695),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-loan-total"},[e("div",{staticClass:"m-loan-total__icon"},[e("f-icon",{attrs:{icon:"fa-hand-holding-dollar"}})],1),e("div",[e("p",{staticClass:"m-loan-total__subtitle"},[t._v("Saldo general:")]),e("p",{staticClass:"m-loan-total__text"},[t._v("$ "+t._s(t._f("formatNumber")(t.total)))])])])},Z=[],C={name:"LoansTotal",props:{total:{type:[String,Number],default:0}}},b=C,x=(0,_.Z)(b,g,Z,!1,null,null,null),y=x.exports,L=s(1715),F=s(9772),S={name:"LoansView",components:{LoanRow:L.Z,LoansTotal:y,LoansFilters:p,SearchInput:o.Z,ContentGeneral:i.Z,TitleGeneral:l.Z},data(){return{search:"",uc:new v.Z,clientsUc:new F.Z}},watch:{filterSelected(){this.init()},search(){this.init()}},computed:{...(0,d.rn)("loansStore",["filterSelected","loans"])},methods:{goToSave(){this.$router.push("/clients")},init(){this.setLoans(this.uc.getAllLoans(this.filterSelected,this.search)),this.setBackMainRoute("/loans"),this.setBackRoute("/loans")},getName(t){const e=this.clientsUc.getClientById(t);return e.name},...(0,d.OI)("loansStore",["setLoans","setBackRoute","setBackMainRoute"])},created(){this.init()}},B=S,w=(0,_.Z)(B,a,n,!1,null,null,null),k=w.exports},1782:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"l-general",class:t.classWButton},[e("div",{staticClass:"l-content"},[t._t("default"),t.buttonText?e("div",{staticClass:"l-button"},[e("button",{staticClass:"button-general",on:{click:function(e){return t.buttonAction()}}},[t._v(" "+t._s(t.buttonText)+" ")])]):t._e()],2)])},n=[],l={props:{buttonText:{type:String,default:""},buttonAction:{type:Function,default:()=>{}},isSearch:{type:Boolean,default:!1},hasFilters:{type:Boolean,default:!1}},computed:{showButton(){return this.buttonText},classWButton(){let t="";return this.showButton&&(t+="l-general--button "),this.isSearch&&(t+="l-general--search "),this.hasFilters&&(t+="l-general--filters "),t}}},i=l,o=s(1001),r=(0,o.Z)(i,a,n,!1,null,null,null),c=r.exports},6466:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-container"},[e("b-icon",{staticClass:"search-icon",attrs:{icon:"search"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"search-input",attrs:{type:"text",maxlength:t.max,placeholder:t.label},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})],1)},n=[],l={props:{label:{type:String,default:""},value:{type:[String,Number],default:""},max:{type:Number}},data(){return{text:this.value}},watch:{text(){this.$emit("input",this.text)},value(t){this.text=t}}},i=l,o=s(1001),r=(0,o.Z)(i,a,n,!1,null,null,null),c=r.exports},9772:function(t,e,s){s.d(e,{Z:function(){return u}});var a=s(714),n=s(8829),l=s(2575),i=s(889),o=s(4527),r=new WeakMap,c=new WeakMap;class u{constructor(){(0,a.Z)(this,r,{writable:!0,value:void 0}),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,l.Z)(this,r,new i.Z),(0,l.Z)(this,c,new o.Z)}getClientByDocument(t){return(0,n.Z)(this,r).getClientByDoc(t)}getClientById(t){return(0,n.Z)(this,r).getClientById(t)}getAllClients(){return(0,n.Z)(this,r).getClientsFromLocal()}getClientsByFilter(t){return(0,n.Z)(this,r).getClientsFromLocalBySearch(t)}saveClient(t,e,s,a,l,i,o,c){let u=[];return u=c?(0,n.Z)(this,r).updateClientToLocal(c,t,e,s,a,l,i,o):(0,n.Z)(this,r).addClientToLocal(t,e,s,a,l,i,o),u}deleteClient(t){return(0,n.Z)(this,c).deleteByClient(t),(0,n.Z)(this,r).deleteToLocal(t)}}},6973:function(t,e,s){s.d(e,{Z:function(){return r}});var a=s(714),n=s(8829),l=s(2575),i=s(9844),o=new WeakMap;class r{constructor(){(0,a.Z)(this,o,{writable:!0,value:void 0}),(0,l.Z)(this,o,new i.Z)}addFee(t,e,s,a){let l="";return l=a?(0,n.Z)(this,o).updateFee(t,e,a):(0,n.Z)(this,o).addFeeToLocal(t,e,s),l}getFeesByLoan(t){return(0,n.Z)(this,o).getFeesByLoan(t)}getTotalFees(t){return(0,n.Z)(this,o).getTotalFees(t)}paidFee(t){return(0,n.Z)(this,o).paidFee(t)}deleteFee(t){return(0,n.Z)(this,o).deleteFee(t)}possibleDateFee(t,e){return(0,n.Z)(this,o).possibleDateFee(t,e)}paidAmountFee(t,e){return(0,n.Z)(this,o).paidAmountFee(t,e)}getFeesByDate(t,e){return(0,n.Z)(this,o).getFeesByDate(t,e)}}},7695:function(t,e,s){s.d(e,{Z:function(){return u}});var a=s(714),n=s(8829),l=s(2575),i=s(9844),o=s(4527),r=new WeakMap,c=new WeakMap;class u{constructor(){(0,a.Z)(this,r,{writable:!0,value:void 0}),(0,a.Z)(this,c,{writable:!0,value:void 0}),(0,l.Z)(this,r,new o.Z),(0,l.Z)(this,c,new i.Z)}getLoansByClient(t){return(0,n.Z)(this,r).getLoansByClient(t)}getLoanById(t){return(0,n.Z)(this,r).getLoanById(t)}getAllLoans(t,e){return(0,n.Z)(this,r).getLoansFromLocal(t,e)}saveLoan(t,e,s,a,l,i,o,u,d,h,f){let _={};return d?(_=(0,n.Z)(this,r).updateLoanToLocal(d,t,e,s,a,l,i,o,u),(0,n.Z)(this,c).deleteByLoan(d)):_=(0,n.Z)(this,r).addLoanToLocal(t,e,s,a,l,i),i&&l&&(0,n.Z)(this,c).addFeesToLocal(_.loan.id,h,f),_}deleteLoan(t){return(0,n.Z)(this,r).deleteToLocal(t)}deleteByClient(t){return(0,n.Z)(this,r).deleteByClient(t)}closeLoan(t){return(0,n.Z)(this,r).closeLoan(t)}}}}]);
//# sourceMappingURL=loans.45a29008.js.map