"use strict";(self["webpackChunkprestamos_app"]=self["webpackChunkprestamos_app"]||[]).push([[313],{8714:function(t,e,l){l.r(e),l.d(e,{default:function(){return L}});var i=function(){var t=this,e=t._self._c;return e("div",[e("title-general",{attrs:{title:"",buttonBack:"/clients"}}),e("div",{staticClass:"m-photo"}),e("content-general",[e("div",{staticClass:"o-detail-client"},[e("div",{staticClass:"o-detail-client__header"},[e("p",{staticClass:"o-detail-client__name"},[t._v(t._s(t.clientSelected.name))]),e("p",{staticClass:"o-detail-client__text"},[t._v(t._s(t.clientSelected.document))])]),e("client-actions"),e("div",{staticClass:"o-detail-client__body"},[e("p",{staticClass:"o-detail-client__title"},[t._v("Datos de contacto")]),e("p",{staticClass:"o-detail-client__label"},[t._v("Celular")]),e("p",{staticClass:"o-detail-client__data"},[t._v(t._s(t.clientSelected.mobile))]),t.clientSelected.tel?e("p",{staticClass:"o-detail-client__label"},[t._v(" Teléfono fijo ")]):t._e(),t.clientSelected.tel?e("p",{staticClass:"o-detail-client__data"},[t._v(" "+t._s(t.clientSelected.tel)+" ")]):t._e(),e("p",{staticClass:"o-detail-client__label"},[t._v("Dirección")]),e("p",{staticClass:"o-detail-client__data"},[t._v(t._s(t.clientSelected.address))]),e("p",{staticClass:"o-detail-client__label"},[t._v("Barrio")]),e("p",{staticClass:"o-detail-client__data"},[t._v(t._s(t.clientSelected.nbh))]),t.clientSelected.comments?e("p",{staticClass:"o-detail-client__label"},[t._v(" Comentarios ")]):t._e(),t.clientSelected.comments?e("p",{staticClass:"o-detail-client__data"},[t._v(" "+t._s(t.clientSelected.comments)+" ")]):t._e()])],1)])],1)},n=[],s=l(3923),a=l(1782),o=l(3822),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"o-detail-client__actions"},[e("div",{staticClass:"o-detail-client__action",on:{click:function(e){return t.goToEdit()}}},[e("div",{staticClass:"o-detail-client__icon edit"}),e("p",[t._v("Editar")])]),e("div",{staticClass:"o-detail-client__action",on:{click:function(e){return t.goToSaveLoan()}}},[e("div",{staticClass:"o-detail-client__icon new"}),e("p",[t._v("Nuevo préstamo")])]),e("div",{staticClass:"o-detail-client__action",on:{click:function(e){return t.goToLoans()}}},[e("div",{staticClass:"o-detail-client__icon see"}),e("p",[t._v("Préstamos")])]),e("div",{staticClass:"o-detail-client__action",on:{click:function(e){return t.deleteClient()}}},[e("div",{staticClass:"o-detail-client__icon delete"}),e("p",[t._v("Eliminar")])])])},r=[],d=l(2399),u=l(9772),_=l(7695),h={data(){return{uc:new u.Z,loansUc:new _.Z}},computed:{...(0,o.rn)("clientsStore",["clientSelected"])},methods:{goToEdit(){this.$router.push("save-client")},goToSaveLoan(){this.setBackRoute("/detail-client"),this.$router.push("save-loan")},goToLoans(){const t=this.loansUc.getLoansByClient(this.clientSelected.id),e=t.length;0===e?this.goToSaveLoan():1===e?(this.setBackRoute("/detail-client"),this.setLoanSelected(t[0]),this.$router.push("detail-loan")):this.$router.push("loans-client")},async deleteClient(){const t=await d.t.confirm("Se eliminará el cliente, todos los prestamos hechos y las ganancias, ¿Está seguro?");t.isConfirmed&&(this.uc.deleteClient(this.clientSelected.id),await d.t.notify("Cliente eliminado"),this.$router.push("/clients"))},...(0,o.OI)("loansStore",["setBackRoute","setLoanSelected"])}},C=h,v=l(1001),p=(0,v.Z)(C,c,r,!1,null,null,null),Z=p.exports,S={components:{TitleGeneral:s.Z,ContentGeneral:a.Z,ClientActions:Z},computed:{...(0,o.rn)("clientsStore",["clientSelected"])},methods:{validateClient(){this.clientSelected||this.$router.push("/clients")},...(0,o.OI)("clientsStore",["setClientSelected"]),...(0,o.OI)("loansStore",["setLoanSelected"])},created(){this.validateClient(),this.setLoanSelected(null)}},f=S,g=(0,v.Z)(f,i,n,!1,null,null,null),L=g.exports},1782:function(t,e,l){l.d(e,{Z:function(){return r}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"l-general",class:t.classWButton},[e("div",{staticClass:"l-content"},[t._t("default"),t.buttonText?e("div",{staticClass:"l-button"},[e("button",{staticClass:"button-general",on:{click:function(e){return t.buttonAction()}}},[t._v(" "+t._s(t.buttonText)+" ")])]):t._e()],2)])},n=[],s={props:{buttonText:{type:String,default:""},buttonAction:{type:Function,default:()=>{}},isSearch:{type:Boolean,default:!1},hasFilters:{type:Boolean,default:!1}},computed:{showButton(){return this.buttonText},classWButton(){let t="";return this.showButton&&(t+="l-general--button "),this.isSearch&&(t+="l-general--search "),this.hasFilters&&(t+="l-general--filters "),t}}},a=s,o=l(1001),c=(0,o.Z)(a,i,n,!1,null,null,null),r=c.exports},9772:function(t,e,l){l.d(e,{Z:function(){return d}});var i=l(714),n=l(8829),s=l(2575),a=l(889),o=l(4527),c=new WeakMap,r=new WeakMap;class d{constructor(){(0,i.Z)(this,c,{writable:!0,value:void 0}),(0,i.Z)(this,r,{writable:!0,value:void 0}),(0,s.Z)(this,c,new a.Z),(0,s.Z)(this,r,new o.Z)}getClientByDocument(t){return(0,n.Z)(this,c).getClientByDoc(t)}getClientById(t){return(0,n.Z)(this,c).getClientById(t)}getAllClients(){return(0,n.Z)(this,c).getClientsFromLocal()}getClientsByFilter(t){return(0,n.Z)(this,c).getClientsFromLocalBySearch(t)}saveClient(t,e,l,i,s,a,o,r){let d=[];return d=r?(0,n.Z)(this,c).updateClientToLocal(r,t,e,l,i,s,a,o):(0,n.Z)(this,c).addClientToLocal(t,e,l,i,s,a,o),d}deleteClient(t){return(0,n.Z)(this,r).deleteByClient(t),(0,n.Z)(this,c).deleteToLocal(t)}}},7695:function(t,e,l){l.d(e,{Z:function(){return d}});var i=l(714),n=l(8829),s=l(2575),a=l(9844),o=l(4527),c=new WeakMap,r=new WeakMap;class d{constructor(){(0,i.Z)(this,c,{writable:!0,value:void 0}),(0,i.Z)(this,r,{writable:!0,value:void 0}),(0,s.Z)(this,c,new o.Z),(0,s.Z)(this,r,new a.Z)}getLoansByClient(t){return(0,n.Z)(this,c).getLoansByClient(t)}getLoanById(t){return(0,n.Z)(this,c).getLoanById(t)}getAllLoans(t,e){return(0,n.Z)(this,c).getLoansFromLocal(t,e)}saveLoan(t,e,l,i,s,a,o,d,u,_,h){let C={};return u?(C=(0,n.Z)(this,c).updateLoanToLocal(u,t,e,l,i,s,a,o,d),(0,n.Z)(this,r).deleteByLoan(u)):C=(0,n.Z)(this,c).addLoanToLocal(t,e,l,i,s,a),a&&s&&(0,n.Z)(this,r).addFeesToLocal(C.loan.id,_,h),C}deleteLoan(t){return(0,n.Z)(this,c).deleteToLocal(t)}deleteByClient(t){return(0,n.Z)(this,c).deleteByClient(t)}closeLoan(t){return(0,n.Z)(this,c).closeLoan(t)}}}}]);
//# sourceMappingURL=detail-client.bd05a9e2.js.map