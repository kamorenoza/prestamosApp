"use strict";(self["webpackChunkprestamos_app"]=self["webpackChunkprestamos_app"]||[]).push([[986],{2840:function(e,t,a){a.d(t,{Z:function(){return w}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-fee",class:e.addClass(e.fee.paidDate,e.fee.date)},[t("div",{staticClass:"m-fee__icon",on:{click:function(t){return e.paidFee(e.fee,e.fee.paidDate)}}},[e.fee.paidDate?t("f-icon",{staticClass:"m-fee__success",attrs:{icon:"fa-check-circle"}}):t("f-icon",{staticClass:"m-fee__danger",attrs:{icon:"fa-regular fa-circle"}})],1),t("div",{staticClass:"m-fee__body",on:{click:function(t){return e.goToLoan()}}},[e.isHome?t("p",{staticClass:"m-fee__name"},[e._v(e._s(e.clientName))]):e._e(),t("p",{staticClass:"text-book"},[e._v(e._s(e.dateFee(e.fee.date)))]),e.fee.possibleDate?t("p",{staticClass:"m-fee__label"},[e._v("Posible pago: "+e._s(e._f("formatDate")(e.fee.possibleDate)))]):e.fee.paidDate?t("p",{staticClass:"m-fee__label"},[e._v("Pagado "+e._s(e._f("formatDate")(e.fee.paidDate)))]):e._e()]),t("div",{staticClass:"m-fee__amount",on:{click:function(t){return e.goToLoan()}}},[t("p",{staticClass:"text-book"},[e._v("$ "+e._s(e._f("formatNumber")(e.fee.amount)))]),e.fee.paidAmount>0?t("p",{staticClass:"m-fee__label m-fee__success text-book"},[e._v("$ "+e._s(e._f("formatNumber")(e.fee.paidAmount)))]):e._e()]),e.fee.paidDate?e._e():t("fee-actions",{attrs:{fee:e.fee,action:e.action}})],1)},o=[],i=a(3404),n=a(6797),l=a.n(n),c=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],staticClass:"m-fee__actions"},[t("b-icon-three-dots-vertical",{on:{click:function(t){return e.changeShow()}}}),e.show?t("div",{staticClass:"m-fee__options"},[t("div",{staticClass:"m-fee__item",on:{click:function(t){return e.edit()}}},[e._v("Editar cuota")]),t("div",{staticClass:"m-fee__item",on:{click:function(t){return e.deleteFee()}}},[e._v("Eliminar cuota")]),t("div",{staticClass:"m-fee__item",on:{click:function(t){return e.possibleDate()}}},[e._v("Posible fecha pago")]),t("div",{staticClass:"m-fee__item",on:{click:function(t){return e.paidAmountDate()}}},[e._v("Agregar abono")]),t("div",{staticClass:"m-fee__item",on:{click:function(t){return e.paidAmountDate()}}},[e._v("Editar abono")])]):e._e()],1)},r=[],d=a(3822),u=a(2399),f=a(6973),h={name:"FeeActions",props:{fee:{type:Object},action:{type:Function}},data(){return{show:!1,uc:new f.Z}},methods:{changeShow(){this.show=!this.show},close(){this.show=!1},edit(){this.setFeeSelected(this.fee),this.$bvModal.show("feeModal")},possibleDate(){this.setFeeSelected(this.fee),this.$bvModal.show("feeModalDate")},paidAmountDate(){this.setFeeSelected(this.fee),this.$bvModal.show("feeModalAmount")},async deleteFee(){const e=await u.t.confirm("Se eliminará la cuota, ¿Está seguro?");e.isConfirmed&&(this.uc.deleteFee(this.fee.id),await u.t.notify("Cuota eliminada"),this.action())},...(0,d.OI)("loansStore",["setFeeSelected"])}},m=h,p=a(1001),_=(0,p.Z)(m,c,r,!1,null,null,null),v=_.exports,C=a(7695),Z=a(9772),b={name:"FeeRow",components:{FeeActions:v},props:{fee:{type:Object},isHome:{type:Boolean,default:!1},backRoute:{type:String,default:"/"},action:{type:Function,default:()=>{}}},data(){return{uc:new f.Z,loansUc:new C.Z,clientsUc:new Z.Z}},computed:{loan(){return this.loansUc.getLoanById(this.fee.loanId)},clientName(){const e=this.clientsUc.getClientById(this.loan.clientId);return e.name}},methods:{dateFee(e){const t=e.split("-");return i.P.formatDate(`${t[1]}/${t[0]}/${t[2]}`)},addClass(e,t){if(e)return"m-fee--paid";{const e=t.split("-"),a=l()().format("MM/DD/YYYY");return l()(`${e[1]}/${e[0]}/${e[2]}`).isSameOrAfter(l()(a))?"":"m-fee--overdue"}},async paidFee(e,t){const a=t?"NO PAGADA":"PAGADA",s=await u.t.confirm("Se actualizará la cuota a "+a);s.isConfirmed&&(this.uc.paidFee(e.id),this.action())},goToLoan(){this.isHome&&(this.setLoanSelected(this.loan),this.setBackMainRoute("/"),this.setBackRoute("/"),this.$router.push("/detail-loan"))},...(0,d.OI)("loansStore",["setLoanSelected","setBackRoute","setBackMainRoute"])}},F=b,g=(0,p.Z)(F,s,o,!1,null,null,null),w=g.exports},9519:function(e,t,a){a.d(t,{Z:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"feeModalAmount","hide-footer":"",centered:"","hide-header":"","content-class":"border-0","body-class":"p-0"},on:{show:e.fillData}},[t("div",{staticClass:"o-modal"},[t("div",{staticClass:"o-modal__header"},[t("p",[e._v("Agregar posible fecha pago")])]),t("div",{staticClass:"o-modal__body"},[t("input-general",{attrs:{"is-number":"",icon:"fa-hand-holding-dollar",label:"Valor"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),t("div",{staticClass:"o-modal__footer"},[t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.closeModal()}}},[e._v("CANCELAR")]),t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.saveFee()}}},[e._v("ACEPTAR")])])])])},o=[],i=a(3822),n=a(2399),l=a(6973),c=a(3972),r=a(3404),d={name:"PaidAmountModal",props:{action:{type:Function,default:()=>{}}},components:{InputGeneral:c.Z},data(){return{amount:"",uc:new l.Z}},computed:{...(0,i.rn)("loansStore",["loanSelected","feeSelected"])},methods:{closeModal(){this.$bvModal.hide("feeModalAmount"),this.date="",this.setFeeSelected(null)},saveFee(){const e=this.uc.paidAmountFee(this.amount,this.feeSelected.id);e&&(n.t.notify("Guardado corrrectamente"),this.closeModal(),this.action())},fillData(){this.feeSelected&&this.feeSelected.paidAmount&&(this.amount=r.P.formatNumber(this.feeSelected.paidAmount))},clear(){this.date=""},...(0,i.OI)("loansStore",["setFeeSelected"])},created(){this.fillData()}},u=d,f=a(1001),h=(0,f.Z)(u,s,o,!1,null,null,null),m=h.exports},2545:function(e,t,a){a.d(t,{Z:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"feeModalDate","hide-footer":"",centered:"","hide-header":"","content-class":"border-0","body-class":"p-0"},on:{show:e.fillData}},[t("div",{staticClass:"o-modal"},[t("div",{staticClass:"o-modal__header"},[t("p",[e._v("Agregar posible fecha pago")])]),t("div",{staticClass:"o-modal__body"},[t("input-date",{model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("div",{staticClass:"o-modal__footer"},[t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.closeModal()}}},[e._v("CANCELAR")]),t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.clear()}}},[e._v("LIMPIAR")]),t("p",{staticClass:"o-modal__action",on:{click:function(t){return e.saveFee()}}},[e._v("ACEPTAR")])])])])},o=[],i=a(8866),n=a(3822),l=a(2399),c=a(6973),r={name:"PossibleDateModal",props:{action:{type:Function,default:()=>{}}},components:{InputDate:i.Z},data(){return{date:"",uc:new c.Z}},computed:{...(0,n.rn)("loansStore",["loanSelected","feeSelected"])},methods:{closeModal(){this.$bvModal.hide("feeModalDate"),this.date="",this.setFeeSelected(null)},saveFee(){const e=this.uc.possibleDateFee(this.date,this.feeSelected.id);e&&(l.t.notify("Guardado corrrectamente"),this.closeModal(),this.action())},fillData(){this.feeSelected&&this.feeSelected.possibleDate&&(this.date=new Date(this.feeSelected.possibleDate),this.id=this.feeSelected.id)},clear(){this.date=""},...(0,n.OI)("loansStore",["setFeeSelected"])},created(){this.fillData()}},d=r,u=a(1001),f=(0,u.Z)(d,s,o,!1,null,null,null),h=f.exports},9772:function(e,t,a){a.d(t,{Z:function(){return d}});var s=a(714),o=a(8829),i=a(2575),n=a(889),l=a(4527),c=new WeakMap,r=new WeakMap;class d{constructor(){(0,s.Z)(this,c,{writable:!0,value:void 0}),(0,s.Z)(this,r,{writable:!0,value:void 0}),(0,i.Z)(this,c,new n.Z),(0,i.Z)(this,r,new l.Z)}getClientByDocument(e){return(0,o.Z)(this,c).getClientByDoc(e)}getClientById(e){return(0,o.Z)(this,c).getClientById(e)}getAllClients(){return(0,o.Z)(this,c).getClientsFromLocal()}getClientsByFilter(e){return(0,o.Z)(this,c).getClientsFromLocalBySearch(e)}saveClient(e,t,a,s,i,n,l,r){let d=[];return d=r?(0,o.Z)(this,c).updateClientToLocal(r,e,t,a,s,i,n,l):(0,o.Z)(this,c).addClientToLocal(e,t,a,s,i,n,l),d}deleteClient(e){return(0,o.Z)(this,r).deleteByClient(e),(0,o.Z)(this,c).deleteToLocal(e)}}},6973:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(714),o=a(8829),i=a(2575),n=a(9844),l=new WeakMap;class c{constructor(){(0,s.Z)(this,l,{writable:!0,value:void 0}),(0,i.Z)(this,l,new n.Z)}addFee(e,t,a,s){let i="";return i=s?(0,o.Z)(this,l).updateFee(e,t,s):(0,o.Z)(this,l).addFeeToLocal(e,t,a),i}getFeesByLoan(e){return(0,o.Z)(this,l).getFeesByLoan(e)}getTotalFees(e){return(0,o.Z)(this,l).getTotalFees(e)}paidFee(e){return(0,o.Z)(this,l).paidFee(e)}deleteFee(e){return(0,o.Z)(this,l).deleteFee(e)}possibleDateFee(e,t){return(0,o.Z)(this,l).possibleDateFee(e,t)}paidAmountFee(e,t){return(0,o.Z)(this,l).paidAmountFee(e,t)}getFeesByDate(e,t){return(0,o.Z)(this,l).getFeesByDate(e,t)}}},7695:function(e,t,a){a.d(t,{Z:function(){return d}});var s=a(714),o=a(8829),i=a(2575),n=a(9844),l=a(4527),c=new WeakMap,r=new WeakMap;class d{constructor(){(0,s.Z)(this,c,{writable:!0,value:void 0}),(0,s.Z)(this,r,{writable:!0,value:void 0}),(0,i.Z)(this,c,new l.Z),(0,i.Z)(this,r,new n.Z)}getLoansByClient(e){return(0,o.Z)(this,c).getLoansByClient(e)}getLoanById(e){return(0,o.Z)(this,c).getLoanById(e)}getAllLoans(e,t){return(0,o.Z)(this,c).getLoansFromLocal(e,t)}saveLoan(e,t,a,s,i,n,l,d,u,f,h){let m={};return u?(m=(0,o.Z)(this,c).updateLoanToLocal(u,e,t,a,s,i,n,l,d),(0,o.Z)(this,r).deleteByLoan(u)):m=(0,o.Z)(this,c).addLoanToLocal(e,t,a,s,i,n),n&&i&&(0,o.Z)(this,r).addFeesToLocal(m.loan.id,f,h),m}deleteLoan(e){return(0,o.Z)(this,c).deleteToLocal(e)}deleteByClient(e){return(0,o.Z)(this,c).deleteByClient(e)}closeLoan(e){return(0,o.Z)(this,c).closeLoan(e)}}}}]);
//# sourceMappingURL=986.52c46ff5.js.map