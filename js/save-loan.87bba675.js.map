{"version":3,"file":"js/save-loan.87bba675.js","mappings":"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","sources":["webpack://prestamos-app/./src/loans/context/views/SaveLoan.vue","webpack://prestamos-app/./src/shared/components/InputSelect.vue","webpack://prestamos-app/src/shared/components/InputSelect.vue","webpack://prestamos-app/./src/shared/components/InputSelect.vue?bbb5","webpack://prestamos-app/./src/shared/components/InputSelect.vue?d552","webpack://prestamos-app/./src/shared/calculateFees.js","webpack://prestamos-app/src/loans/context/views/SaveLoan.vue","webpack://prestamos-app/./src/loans/context/views/SaveLoan.vue?874b","webpack://prestamos-app/./src/loans/context/views/SaveLoan.vue?bf81","webpack://prestamos-app/./src/clients/usecases/clientsUc.js","webpack://prestamos-app/./src/loans/usecases/loansUc.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('title-general',{attrs:{\"title\":\"\",\"buttonBack\":_vm.backRoute}}),_c('div',{staticClass:\"o-loan\"},[_c('p',{staticClass:\"o-loan__name\"},[_vm._v(\" \"+_vm._s(_vm.clientName())+\" \")]),_c('div',{staticClass:\"o-loan__card\"},[_c('input-date',{staticClass:\"mb-3\",model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}}),_c('input-general',{staticClass:\"mb-3\",attrs:{\"max\":11,\"label\":\"Capital\",\"is-number\":\"\",\"icon\":\"fa-money-bill-wave\"},model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}}),_c('input-general',{staticClass:\"mb-3\",attrs:{\"max\":11,\"label\":\"Interés\",\"is-number\":\"\",\"icon\":\"fa-hand-holding-dollar\"},model:{value:(_vm.interes),callback:function ($$v) {_vm.interes=$$v},expression:\"interes\"}}),_c('div',{staticClass:\"d-flex align-items-center justify-content-between\"},[_c('input-general',{staticClass:\"mb-0\",attrs:{\"label\":\"Cuotas\",\"max\":3,\"is-document\":\"\",\"icon\":\"fa-repeat\"},model:{value:(_vm.fees),callback:function ($$v) {_vm.fees=$$v},expression:\"fees\"}}),_c('input-select',{staticClass:\"mb-0\",attrs:{\"options\":_vm.typesTimes},model:{value:(_vm.typeTime),callback:function ($$v) {_vm.typeTime=$$v},expression:\"typeTime\"}})],1)],1),_c('div',{staticClass:\"o-loan__body\"},[(_vm.isValidData)?_c('div',[_c('p',{staticClass:\"o-loan__title\"},[_vm._v(\"Valor de la cuota\")]),_c('p',{staticClass:\"mb-4\"},[_vm._v(\"$ \"+_vm._s(_vm.feeValue))]),_c('p',{staticClass:\"o-loan__title\"},[_vm._v(\"Fechas de las cuotas\")]),_c('div',{staticClass:\"o-loan__dates\"},[_c('ul',_vm._l((_vm.paymentDates),function(date,index){return _c('li',{key:index},[_vm._v(_vm._s(date))])}),0)])]):_vm._e(),_c('div',{staticClass:\"l-button\"},[_c('button',{staticClass:\"button-general\",on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"GUARDAR PRÉSTAMO\")])])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"input-container\"},[(_vm.icon)?_c('f-icon',{staticClass:\"input-icon\",attrs:{\"icon\":_vm.icon}}):_vm._e(),_c('b-form-select',{staticClass:\"input-general\",attrs:{\"options\":_vm.options},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}}),_c('valid-alert',{attrs:{\"data-value\":_vm.selected,\"validate\":_vm.validate}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"input-container\">\n    <f-icon v-if=\"icon\" class=\"input-icon\" :icon=\"icon\" />\n    <b-form-select class=\"input-general\" v-model=\"selected\" :options=\"options\"  />\n    <valid-alert :data-value=\"selected\" :validate=\"validate\" />\n  </div>\n</template>\n\n<script>\nimport validAlert from \"./validAlert.vue\"\nimport {es} from 'vuejs-datepicker/dist/locale'\n\nexport default {\n  name: \"InputSelect\",\n\n  components: {\n    validAlert\n  },\n\n  props: {\n    label: {\n      type: [String],\n      default: \"\",\n    },\n\n    value: {\n      type: [String, Number, Date],\n      default: \"\",\n    },\n\n    icon: {\n      type: String,\n      default: \"\",\n    },\n\n    options: {\n      type: Array\n    },\n\n    validate: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      selected: this.value,\n      es: es\n    }\n  },\n\n  watch: {\n    selected() {\n      this.$emit(\"input\", this.selected)\n    },\n\n    value(value) {\n      this.selected = value\n    },\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./InputSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./InputSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputSelect.vue?vue&type=template&id=a3f4f440&\"\nimport script from \"./InputSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./InputSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import moment from 'moment'\nimport { utils } from \"@/shared/utils\";\n\nfunction getByDay(dateInit, numFees) {\n  let data = [];\n  let date = moment(dateInit)\n\n  for (let i = 1; i <= numFees; i++) {\n    const newDate = moment(date).add(1, 'd')\n\n    data.push(newDate.format('DD-MM-YYYY'))\n    date = moment(newDate)\n  }\n\n  return data;\n}\n\nfunction getByWeek(dateInit, numFees) {\n  let data = [];\n  let date = moment(dateInit)\n\n  for (let i = 1; i <= numFees; i++) {\n    const newDate = moment(date).add(7, 'd')\n\n    data.push(newDate.format('DD-MM-YYYY'))\n    date = moment(newDate)\n  }\n\n  return data\n}\n\nfunction getByFortnight(dateInit, numFees) {\n  let date = moment(dateInit)\n\n  let day = date.date()\n  const month = date.month() + 1\n  const year = date.year()\n\n  let data = []\n\n  if (day > 30) day = 30\n\n  let dayFirstFee = day + 15\n  if (dayFirstFee > 30) dayFirstFee = dayFirstFee - 30\n\n  let dayNextFee = day\n  let calculateMonth = month\n  let calculateYear = year\n  const sumDay = day + 15\n\n  for (let i = 1; i <= numFees; i++) {\n    if (i % 2 !== 0) {\n      if (sumDay > 30) calculateMonth = calculateMonth + 1\n    } else {\n      if (sumDay <= 30) calculateMonth = calculateMonth + 1\n    }\n\n    if (calculateMonth > 12) {\n        calculateMonth = 1\n        calculateYear = calculateYear + 1\n    }\n\n    let dateFee2 = \"\"\n    if (i % 2 === 0) {\n      dateFee2 = `${utils.pad(calculateMonth)}/${utils.pad(dayNextFee)}/${calculateYear}`\n      if (calculateMonth === 2 && dayNextFee > 28) dateFee2 = `02/28/${calculateYear}`\n    } else {\n      dateFee2 = `${utils.pad(calculateMonth)}/${utils.pad(dayFirstFee)}/${calculateYear}`\n      if (calculateMonth === 2 && dayFirstFee > 28) dateFee2 = `02/28/${calculateYear}`\n    }\n\n    data.push(moment(dateFee2).format('DD-MM-YYYY'))\n  }\n\n  return data\n}\n\nfunction getByMonth(dateInit, numFees) {\n  let date = moment(dateInit)\n\n  let day = date.date()\n  let month = date.month() + 1\n  let year = date.year()\n\n  let data = []\n\n  if (day > 30) day = 30\n\n  for (let i = 1; i <= numFees; i++){\n    month = month + 1\n\n    if (month > 12) {\n      month = 1\n      year = year + 1\n    }\n\n    let dateFee2 = month + \"/\" + day + \"/\" + year\n    if (month === 2 && day > 28) dateFee2 = month + \"/\" + day + \"/\" + year\n\n    data.push(moment(dateFee2).format('DD-MM-YYYY'))\n  }\n\n  return data;\n}\n\nfunction calculate (dateInit, numFees, type) {\n  if (type === 1) return getByDay(dateInit, numFees, type)\n  if (type === 8) return getByWeek(dateInit, numFees, type)\n  if (type === 15) return getByFortnight(dateInit, numFees, type)\n  if (type === 30) return getByMonth(dateInit, numFees, type)\n}\n\nexport const calculateFees = {\n  calculate\n}\n","<template>\n  <div>\n    <title-general title=\"\" :buttonBack=\"backRoute\" />\n    <div class=\"o-loan\">\n      <p class=\"o-loan__name\"> {{ clientName() }} </p>\n      <div class=\"o-loan__card\">\n        <input-date v-model=\"date\" class=\"mb-3\" />\n        <input-general v-model=\"amount\" :max=\"11\" class=\"mb-3\" label=\"Capital\" is-number icon=\"fa-money-bill-wave\" />\n        <input-general v-model=\"interes\" :max=\"11\" class=\"mb-3\" label=\"Interés\" is-number icon=\"fa-hand-holding-dollar\" />\n\n        <div class=\"d-flex align-items-center justify-content-between\">\n          <input-general class=\"mb-0\" v-model=\"fees\" label=\"Cuotas\" :max=\"3\" is-document icon=\"fa-repeat\" />\n          <input-select class=\"mb-0\" :options=\"typesTimes\" v-model=\"typeTime\" />\n        </div>\n      </div>\n\n      <div class=\"o-loan__body\">\n        <div v-if=\"isValidData\">\n          <p class=\"o-loan__title\">Valor de la cuota</p>\n          <p class=\"mb-4\">$ {{ feeValue }}</p>\n\n          <p class=\"o-loan__title\">Fechas de las cuotas</p>\n          <div class=\"o-loan__dates\">\n            <ul>\n              <li v-for=\"(date, index) in paymentDates\" :key=\"index\">{{ date }}</li>\n            </ul>\n          </div>\n        </div>\n\n        <div class=\"l-button\">\n          <button class=\"button-general\" @click=\"save()\">GUARDAR PRÉSTAMO</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TitleGeneral from \"@/shared/components/TitleGeneral.vue\"\nimport { mapMutations, mapState } from 'vuex'\nimport InputDate from '@/shared/components/InputDate.vue'\nimport InputGeneral from '@/shared/components/InputGeneral.vue'\nimport InputSelect from '@/shared/components/InputSelect.vue'\nimport { calculateFees } from '@/shared/calculateFees'\nimport { utils } from '@/shared/utils'\nimport LoansUc from '@/loans/usecases/loansUc'\nimport { notification } from '@/shared/notification'\nimport ClientsUc from \"@/clients/usecases/clientsUc\";\n\n\nexport default {\n  components: {\n    TitleGeneral,\n    InputDate,\n    InputGeneral,\n    InputSelect\n  },\n\n  data() {\n    return {\n      id: \"\",\n      date: '',\n      amount: '',\n      interes: '',\n      fees: '',\n      typeTime: '',\n      balance: 0,\n      paymentDates: [],\n      validate: false,\n      uc: new LoansUc(),\n      clientsUc: new ClientsUc()\n    }\n  },\n\n  watch: {\n    date() {\n      this.calculate()\n    },\n\n    amount() {\n      this.calculate()\n    },\n\n    interes() {\n      this.calculate()\n    },\n\n    fees() {\n      this.calculate()\n    },\n\n    typeTime() {\n      this.calculate()\n    }\n  },\n\n  computed: {\n    typesTimes () {\n      return [\n        { value: '', text: 'Plazo' },\n        { value: 1, text: 'Diario' },\n        { value: 8, text: 'Semanal' },\n        { value: 15, text: 'Quincenal' },\n        { value: 30, text: 'Mensual' },\n      ]\n    },\n\n    isValidData () {\n      return this.date && this.amount && this.interes && this.typeTime && this.fees\n    },\n\n    isValidDataFees () {\n      return this.date && this.amount && this.interes\n    },\n\n    feeValue () {\n      const amount = this.amount.replaceAll('.', '')\n      const interes = this.interes.replaceAll('.', '')\n      return utils.onlyNumber(parseInt((parseInt(amount) + parseInt(interes)) / parseInt(this.fees)))\n    },\n\n    ...mapState('loansStore', ['loanSelected', 'backRoute']),\n    ...mapState('clientsStore', ['clientSelected'])\n  },\n\n  methods: {\n    setCurrentDate () {\n      this.date = new Date()\n    },\n\n    calculate () {\n     this.paymentDates = calculateFees.calculate(this.date, this.fees, this.typeTime)\n    },\n\n    async save () {\n      this.validate = true\n\n      if (this.isValidDataFees) {\n        const response = this.uc.saveLoan(\n          this.clientId(),\n          this.date,\n          this.amount,\n          this.interes,\n          this.typeTime,\n          this.fees,\n          false,\n          this.balance,\n          this.id,\n          this.paymentDates,\n          this.feeValue,\n        )\n\n        await notification.notify('Préstamo guardado correctamente')\n        this.setLoanSelected(response.loan)\n        this.$router.push('/detail-loan')\n      }\n    },\n\n    fillData () {\n      if (this.loanSelected) {\n        this.id = this.loanSelected.id\n        this.date = new Date(this.loanSelected.date)\n        this.amount = utils.formatNumber(this.loanSelected.amount)\n        this.interes = utils.formatNumber(this.loanSelected.interes)\n        this.fees = this.loanSelected.feesNum\n        this.fees = this.loanSelected.feesNum\n        this.balance = this.loanSelected.balance\n        this.typeTime = this.loanSelected.typeTime\n        this.calculate()\n      }\n    },\n\n    clientName () {\n      if (this.loanSelected) {\n        const client = this.clientsUc.getClientById(this.loanSelected.clientId)\n\n        return client.name\n      }\n\n      return this.clientSelected ? this.clientSelected.name : ''\n    },\n\n    clientId () {\n      if (this.loanSelected) {\n        const client = this.clientsUc.getClientById(this.loanSelected.clientId)\n\n        return client.id\n      }\n\n      return this.clientSelected ? this.clientSelected.id : ''\n    },\n\n    ...mapMutations('loansStore', ['setLoanSelected', 'setBackRoute'])\n  },\n\n  created() {\n    this.setCurrentDate()\n    this.fillData()\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SaveLoan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SaveLoan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SaveLoan.vue?vue&type=template&id=aebae1ac&\"\nimport script from \"./SaveLoan.vue?vue&type=script&lang=js&\"\nexport * from \"./SaveLoan.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ClientsRepository from \"../models/clientsRepository\"\nimport LoansRepository from \"@/loans/models/loansRepository\";\n\nexport default class ClientsUc {\n  #clientsRepository\n  #loansRepository\n\n  constructor() {\n    this.#clientsRepository = new ClientsRepository()\n    this.#loansRepository = new LoansRepository()\n  }\n\n  getClientByDocument(document) {\n    return this.#clientsRepository.getClientByDoc(document)\n  }\n\n  getClientById(id) {\n    return this.#clientsRepository.getClientById(id)\n  }\n\n  getAllClients() {\n    return this.#clientsRepository.getClientsFromLocal()\n  }\n\n  getClientsByFilter(search) {\n    return this.#clientsRepository.getClientsFromLocalBySearch(search)\n  }\n\n  saveClient(name, document, mobile, tel, address, nbh, comments, id) {\n    let response = []\n\n    if (!id) {\n      response = this.#clientsRepository.addClientToLocal(name, document, mobile, tel, address, nbh, comments)\n    } else {\n      response = this.#clientsRepository.updateClientToLocal(id, name, document, mobile, tel, address, nbh, comments)\n    }\n\n    return response\n  }\n\n  deleteClient (id) {\n    this.#loansRepository.deleteByClient(id)\n    return this.#clientsRepository.deleteToLocal(id)\n  }\n}\n","import FeesRepository from \"../models/feesRepository\"\nimport LoansRepository from \"../models/loansRepository\"\n\nexport default class LoansUc {\n  #loansRepository\n  #feesRepository\n\n  constructor() {\n    this.#loansRepository = new LoansRepository()\n    this.#feesRepository = new FeesRepository()\n  }\n\n  getLoansByClient(clientId) {\n    return this.#loansRepository.getLoansByClient(clientId)\n  }\n\n  getLoanById(clientId) {\n    return this.#loansRepository.getLoanById(clientId)\n  }\n\n  getAllLoans(filter, search) {\n    return this.#loansRepository.getLoansFromLocal(filter, search)\n  }\n\n  saveLoan(clientId, date, amount, interes, typeTime, feesNum, done, balance, id, feesArray, feeAmount) {\n    let response = {}\n\n    if (!id) {\n      response = this.#loansRepository.addLoanToLocal(clientId, date, amount, interes, typeTime, feesNum)\n    } else {\n      response = this.#loansRepository.updateLoanToLocal(id, clientId, date, amount, interes, typeTime, feesNum, done, balance)\n      this.#feesRepository.deleteByLoan(id)\n    }\n\n    if (feesNum && typeTime) this.#feesRepository.addFeesToLocal(response.loan.id, feesArray, feeAmount)\n\n    return response\n  }\n\n  deleteLoan (id) {\n    return this.#loansRepository.deleteToLocal(id)\n  }\n\n  deleteByClient (idClient) {\n    return this.#loansRepository.deleteByClient(idClient)\n  }\n\n  closeLoan (loan) {\n    return this.#loansRepository.closeLoan(loan)\n  }\n}\n"],"names":["render","_vm","this","_c","_self","attrs","backRoute","staticClass","_v","_s","clientName","model","value","date","callback","$$v","expression","amount","interes","fees","typesTimes","typeTime","isValidData","feeValue","_l","paymentDates","index","key","_e","on","$event","save","staticRenderFns","icon","options","selected","validate","name","components","validAlert","props","label","type","default","data","es","watch","component","getByDay","dateInit","numFees","moment","i","newDate","add","push","format","getByWeek","getByFortnight","day","month","year","dayFirstFee","dayNextFee","calculateMonth","calculateYear","sumDay","dateFee2","utils","getByMonth","calculate","calculateFees","TitleGeneral","InputDate","InputGeneral","InputSelect","id","balance","uc","clientsUc","computed","text","isValidDataFees","methods","setCurrentDate","fillData","clientId","created","ClientsUc","constructor","ClientsRepository","LoansRepository","getClientByDocument","document","getClientByDoc","getClientById","getAllClients","getClientsFromLocal","getClientsByFilter","search","getClientsFromLocalBySearch","saveClient","mobile","tel","address","nbh","comments","response","updateClientToLocal","addClientToLocal","deleteClient","deleteByClient","deleteToLocal","LoansUc","FeesRepository","getLoansByClient","getLoanById","getAllLoans","filter","getLoansFromLocal","saveLoan","feesNum","done","feesArray","feeAmount","updateLoanToLocal","deleteByLoan","addLoanToLocal","addFeesToLocal","loan","deleteLoan","idClient","closeLoan"],"sourceRoot":""}